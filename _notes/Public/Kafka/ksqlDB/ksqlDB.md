---
title: ksqlDB를 통한 스트리밍 파이프라인 구성
feed: hide
date: 23-04-2025
permalink: /ksqlDB
---

> 글을 작성하는 중입니다 :)

## ksqlDB를 통한 스트리밍 파이프라인 구성

![ksqldb](/assets/img/ksqldb/logo.png "ksqldb")

<br/>

## ksqlDB에 대해서

ksqlDB는 SQL을 기반으로 카프카 기반 스트림 처리를 도와주는 오픈소스 프로젝트입니다.

인프라와 단순성을 목표로 하여, 

국내에서는 [ksqlDB를 활용한 증권사의 실시간 데이터 처리하기](https://toss.tech/article/ksqldb-realtime-data) 이 글이 유익하니 읽어보시면 좋습니다.

ksqlDB에 대해서는 이미 이런식으로 국내에도 글들이 꽤 있어서, 중요한 특징 몇개만을 짚어보려합니다.

<br/>

### Kafka 단일 종속성

가장 중요한 특징입니다. 

다른 스트리밍 아키텍쳐를 설계할때는 여러 서비스들에 대해 종속성을 가지게 됩니다.

- AWS의 경우 상황에 맞게 EMR, Kinesis, Lambda, DMS 등 사용사례에 맞게 다양한 컴포넌트를 적절히 배치 필요
- 스파크 스트리밍의 경우에도 사용해보지는 않았지만, 스파크 클러스터 내에서 여러 리소스들의 구성와 별도 스토리지 구성이 필요

한 것으로 알고 있습니다.

<br/>

여러 서비스 종속성이 늘어날수록 비용이 늘어나는 것은 물론이고, 서비스 장애 시 문제를 빠르게 파악하기도, 모니터링하기도 어려워집니다.

ksqlDB도 내부적으로 RocksDB를 사용해서 데이터를 저장하지만, 빠른 처리를 위해서 In-Memory에 들고있는 개념으로 실제 데이터는 카프카에 저장되어있습니다.

이런 특성 때문에 데이터 처리 속도를 빠르게 가져가면서도, 다시 ksqlDB를 띄우더라도 카프카에서 다시 데이터를 가져오기 때문에 데이터 손실이 거의 없습니다.

<br/>

### SQL 기반 스트리밍 처리

당연하게도, SQL을 기반으로 스트리밍 처리를 할 수 있습니다.

SQL을 기반으로 높은 생산성 또한 가져갈수있기 때문에, 앞선 인프라의 단순성과 시너지를 내면서 빠른 산출물을 만들어낼 수 있습니다.

다만 일반적인 SQL과는 조금 다르게 Push / Pull 쿼리와 스트림, 테이블 개념들이 들어가있기 때문에, 조금 더 복잡하긴합니다.

<br/>

## ksqlDB 구성 설정

앞에서 말씀드렸던 것처럼 필요한 것은 오직 Kafka Cluster와 ksqlDB 서버가 돌아갈 컴퓨팅 리소스 단 두가지입니다.

다만, 사용상의 편의를 위해서 schema registry도 구성해두면 편리합니다.

자세한 구성에 대한 내용은 

<br/>

## ksqlDB 사례

첫번째 사례에서는, 단순한 조인 쿼리를 통해서 데이터를 만들 것입니다.

